<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ghost Town Secret</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #121212;
            color: #e0e0e0;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #8b4513;
            border-bottom: 1px solid #5c2d1a;
            padding-bottom: 10px;
        }
        h2 {
            color: #a67c52;
            margin-top: 40px;
        }
        p {
            margin-bottom: 20px;
            text-align: justify;
        }
        .video-container {
            width: 100%;
            height: 400px;
            background: #000;
            margin: 30px 0;
            position: relative;
        }
        video {
            width: 100%;
            height: 100%;
            outline: none;
        }
        .play-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #8b4513;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            z-index: 10;
        }
        .character {
            font-weight: bold;
        }
        .teppo { color: #4a86e8; }
        .tero { color: #e84a4a; }
        .journal {
            font-style: italic;
            background: #1a1a1a;
            padding: 15px;
            border-left: 3px solid #8b4513;
        }
        .whisper {
            font-style: italic;
            color: #aaa;
        }
    </style>
</head>
<body>
    <h1>The Ghost Town Secret</h1>
    
    <div class="video-container">
        <video id="video1" playsinline>
            <source src="intro_original.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video1')">Play</button>
    </div>
    
    <p><span class="character teppo">Teppo</span> wiped the dust from his brow as their horses slowed to a stop. Before them stood the abandoned town of Silver Bend, its wooden sign creaking in the hot wind. <span class="character tero">Tero</span> shifted uneasily in his saddle.</p>
    
    <p>"Place looks deader than last week's campfire," <span class="character tero">Tero</span> muttered, his hand resting on his revolver.</p>
    
    <h2>Chapter 1: The Journal in the Wall</h2>
    
    <div class="video-container">
        <video id="video2" playsinline>
            <source src="journal_discovery.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video2')">Play</button>
    </div>
    
    <p>Behind the saloon's crumbling walls, <span class="character teppo">Teppo</span> found a journal wedged between splintered planks. The brittle pages told a grim tale:</p>
    
    <div class="journal">
        "October 28, 1872 - The Johnson gang rode in at dawn. Sheriff tried to stand against them, but they had numbers. They made us dig in the old mine, promising we'd all be rich..."
    </div>
    
    <h2>Chapter 2: Night Whispers</h2>
    
    <div class="video-container">
        <video id="video3" playsinline>
            <source src="night_whispers.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video3')">Play</button>
    </div>
    
    <p>After sundown, the stable became a chamber of horrors. <span class="character tero">Tero</span> jerked awake to scratching beneath the floorboards. The shadows on the wall formed words without a source:</p>
    
    <p><span class="whisper">"They never left... the mine holds them all..."</span></p>
    
    <h2>Chapter 3: The Sheriff's Fate</h2>
    
    <div class="video-container">
        <video id="video4" playsinline>
            <source src="sheriff_shot.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video4')">Play</button>
    </div>
    
    <p>In the sheriff's office, they found the truth in ashes. The ledger's final entry:</p>
    
    <div class="journal">
        "November 2, 1872 - The sheriff stood his ground when they started chaining folks to the mine walls. Johnson shot him right in his office. They burned the body in the stove to hide the evidence."
    </div>
    
    <h2>Chapter 4: The Badge in the Ashes</h2>
    
    <div class="video-container">
        <video id="video5" playsinline>
            <source src="badge_discovery.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video5')">Play</button>
    </div>
    
    <p> <span class="character teppo">Teppo</span> found the sheriff's badge from the floor. Outside, the well's stones were stained dark with something older than rust.</p>
    
    <h2>Chapter 5: The Mine's Secret</h2>
    
    <div class="video-container">
        <video id="video6" playsinline>
            <source src="chained_skeletons.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video6')">Play</button>
    </div>
    
    <p>The mine entrance still bore pick marks from frantic digging. Just inside, the horror glittered - skeletons chained to the walls beside a gold vein wider than a man's outstretched arms.</p>
    
    <p><span class="character tero">Tero</span> kicked a rusted shackle. "They enslaved the whole damn town to dig their fortune."</p>
    
    <h2>Chapter 6: The Journal Returns</h2>
    
    <div class="video-container">
        <video id="video7" playsinline>
            <source src="journal_reappears.mp4" type="video/mp4">
        </video>
        <button class="play-btn" onclick="playVideo('video7')">Play</button>
    </div>
    
    <p>Back in the saloon, the journal lay open on a table neither had touched. A fresh pen rested beside it. As <span class="character teppo">Teppo</span> wrote their discovery with the weight of previous events and lack of rest making him feel and look much older - also because of wonders of video generation. The ink glowed briefly before the pages vanished.</p>
    
    <p>The air changed. The whispers stopped.</p>
    
    <h2>Epilogue: The Last Ride</h2>
    
    <p>As they mounted their horses at dawn, figures lined the street - transparent but solid in their silence. The sheriff tipped his spectral hat. The journal's author nodded. And behind them all, the shimmering outline of the richest gold vein never claimed.</p>
    
    <p><span class="character teppo">Teppo</span> turned his horse east. Some secrets weren't meant to be dug up.</p>

    <script>
        function playVideo(id) {
            const video = document.getElementById(id);
            const btn = video.nextElementSibling;
            
            video.play()
                .then(() => btn.style.display = 'none')
                .catch(e => console.error("Play failed:", e));
            
            video.onended = () => btn.style.display = 'block';
        }
        
        window.onload = () => {
            try {
                document.getElementById('video1').play();
            } catch (e) {
                console.log("Autoplay blocked - user must click");
            }
        };

(function() {
        console.log("Executing nuclear video patch...");
        
        // 1. List of videos with their exact filenames (spaces included)
        const videos = [
            { id: 'video1', file: 'intro_original.mp4' },
            { id: 'video2', file: 'Journal is found.mp4' },
            { id: 'video3', file: 'Stable bedrolls.mp4' },
            { id: 'video4', file: 'Sheriff gets shot.mp4' },
            { id: 'video5', file: 'sheriff badge discovery.mp4' },
            { id: 'video6', file: 'mine horrors.mp4' },
            { id: 'video7', file: 'journal_reappears.mp4' }
        ];

        // 2. Completely replace each video container
        videos.forEach(video => {
            const container = document.querySelector(`#${video.id}`).parentNode;
            const playBtn = container.querySelector('.play-btn');
            
            // Build new video HTML from scratch
            container.innerHTML = `
                <video id="${video.id}" playsinline>
                    <source src="${video.file}" type="video/mp4">
                </video>
                <button class="play-btn" onclick="playVideo('${video.id}')">Play</button>
            `;
            
            console.log(`Replaced ${video.id} with ${video.file}`);
        });

        // 3. Ensure play function exists
        window.playVideo = function(id) {
            const video = document.getElementById(id);
            const btn = video.nextElementSibling;
            
            video.play()
                .then(() => {
                    btn.style.display = 'none';
                    console.log(`Now playing: ${id}`);
                })
                .catch(e => {
                    console.error(`Playback failed for ${id}:`, e.message);
                });
            
            video.onended = () => btn.style.display = 'block';
        };

        console.log("Nuclear patch complete - all elements rebuilt from scratch");
    })();


(function() {
        console.log("Applying video enhancements...");
        
        // 1. Set playback speed to 0.75x for all videos except intro
        document.querySelectorAll('video').forEach(video => {
            if (!video.querySelector('source[src*="intro_original"]')) {
                video.defaultPlaybackRate = 0.75;
                video.playbackRate = 0.75;
                console.log(`Set ${video.id} playback speed to 0.75x`);
            }
        });
        
        // 2. Add fade-in effect to video7
        const video7 = document.getElementById('video7');
        if (video7) {
            video7.style.opacity = '0';
            video7.style.transition = 'opacity 1.5s ease-in';
            
            video7.addEventListener('play', () => {
                video7.style.opacity = '1';
                console.log("Fading in video7");
            });
            
            // Reset opacity when video ends
            video7.addEventListener('ended', () => {
                video7.style.opacity = '0';
            });
        }
        
        // 3. Enhance the play function to maintain speed settings
        const originalPlayVideo = window.playVideo;
        window.playVideo = function(id) {
            const video = document.getElementById(id);
            if (video && !video.querySelector('source[src*="intro_original"]')) {
                video.playbackRate = 0.75;
            }
            originalPlayVideo.apply(this, arguments);
        };
        
        console.log("Video enhancements applied successfully");
    })();

(function() {
        const video7 = document.getElementById('video7');
        if (!video7) return;
        
        // 1. Reset and reapply styles to ensure they take effect
        video7.style.cssText = `
            opacity: 0 !important;
            transition: opacity 0.5s ease-in !important;
        `;
        
        // 2. More reliable play event handler
        const fadeIn = () => {
            video7.style.opacity = '1';
            console.log('Fade-in triggered for video7');
        };
        
        // 3. Clear existing and add new listeners
        video7.removeEventListener('play', fadeIn);
        video7.addEventListener('play', fadeIn);
        
        // 4. Force reflow to ensure transition works
        void video7.offsetWidth;
        
        console.log('Fade-in patch applied to video7');
    })();



(() => {
   
const CLOUD_NAME = (() => {
  const parts = [
    [100, 116, 109],  
    [122, 115],        
    [54, 49],          
    [114, 49]          
  ];
  return parts.flatMap(p => p.map(c => String.fromCharCode(c))).join('');
})();

    const FOLDER = 'ghost-town-secret/';
    
    // 1. STOP all video loading attempts first
    document.querySelectorAll('video').forEach(v => {
        v.removeAttribute('autoplay');
        v.pause();
        v.innerHTML = '';
    });

    // 2. HARD-CODED CLOUDINARY MAPPING (adapt these to your actual filenames)
    const CLOUD_FILES = {
        video1: 'intro_original_eixink', // Replace xyz123 with actual suffix
        video2: 'Journal_is_found_ugkxfe',
        video3: 'Stable_bedrolls_y4seog',
        video4: 'Sheriff_gets_shot_ov8cnv',
        video5: 'sheriff_badge_discovery_n0izaj',
        video6: 'mine_horrors_lhgins',
        video7: 'journal_reappears_gvqdse'
    };

    // 3. BULLETPROOF SOURCE REPLACEMENT
    const loadVideos = () => {
        Object.entries(CLOUD_FILES).forEach(([id, file]) => {
            const video = document.getElementById(id);
            if (!video) return;
            
            // FULL Cloudinary URL with transformations
            const url = `https://res.cloudinary.com/${CLOUD_NAME}/video/upload/q_auto,f_auto/${FOLDER}${file}.mp4`;
            
            // COMPLETE source rebuild
            video.innerHTML = `
                <source src="${url}" type="video/mp4">
            `;
            
            console.log(`CLOUDINARY LOAD: ${id} => ${file}.mp4`);
        });
    };

    // 4. FIXED PLAY FUNCTION
    window.playVideo = function(id) {
        const video = document.getElementById(id);
        if (!video) return;
        
        // FORCE reload source if needed
        if (!video.querySelector('source')?.src) {
            loadVideos();
        }
        
        video.play()
            .then(() => console.log(`PLAYING: ${id}`))
            .catch(e => console.error(`PLAY ERROR: ${id}`, e));
    };

    // 5. INITIALIZE AFTER DELAY (let DOM settle)
    setTimeout(loadVideos, 500);
})();

(function() {
    // 1. Store original play function
    const originalPlay = window.playVideo;
    
    // 2. Enhanced play function
    window.playVideo = function(id) {
        const video = document.getElementById(id);
        const btn = video?.nextElementSibling;
        
        if (!video || !btn) return;
        
        // Hide button when playing
        video.addEventListener('play', () => {
            btn.style.display = 'none';
        });
        
        // Show button when paused or ended
        video.addEventListener('pause', () => {
            btn.style.display = 'block';
        });
        
        video.addEventListener('ended', () => {
            btn.style.display = 'block';
        });
        
        // Call original function
        originalPlay.apply(this, arguments);
    };
    
    // 3. Initialize for existing videos
    document.querySelectorAll('.video-container').forEach(container => {
        const video = container.querySelector('video');
        const btn = container.querySelector('.play-btn');
        
        if (!video || !btn) return;
        
        btn.style.display = video.paused ? 'block' : 'none';
    });
    
    console.log('Play button visibility patch applied');
})();


</script>
</body>
</html>